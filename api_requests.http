@baseUrl = http://localhost:8000/api
@email = test@example.com
@password = password
@token = {{login.response.body.token}}

### Login
# @name login
POST {{baseUrl}}/login
Content-Type: application/json
Accept: application/json

{
    "email": "{{email}}",
    "password": "{{password}}"
}

### Get User
GET {{baseUrl}}/user
Authorization: Bearer {{token}}
Accept: application/json

### --- BATIMENTS ---

### List Batiments
GET {{baseUrl}}/batiments
Authorization: Bearer {{token}}
Accept: application/json

### Create Batiment
POST {{baseUrl}}/batiments
Authorization: Bearer {{token}}
Content-Type: application/json
Accept: application/json

{
    "nom": "Résidence Les Lilas",
    "type_batiment": "Résidence",
    "capacite_totale": 50,
    "adresse": "10 Rue des Fleurs",
    "description": "Une belle résidence calme."
}

### Get Batiment
@batimentId = 1
GET {{baseUrl}}/batiments/{{batimentId}}
Authorization: Bearer {{token}}
Accept: application/json

### Update Batiment
PUT {{baseUrl}}/batiments/{{batimentId}}
Authorization: Bearer {{token}}
Content-Type: application/json
Accept: application/json

{
    "capacite_totale": 55,
    "description": "Capacité augmentée après rénovation."
}

### Delete Batiment
DELETE {{baseUrl}}/batiments/{{batimentId}}
Authorization: Bearer {{token}}
Accept: application/json

### --- APPARTEMENTS ---

### List Appartements
GET {{baseUrl}}/appartements
Authorization: Bearer {{token}}
Accept: application/json

### Create Appartement
POST {{baseUrl}}/appartements
Authorization: Bearer {{token}}
Content-Type: application/json
Accept: application/json

{
    "batiment_id": 1,
    "numero": "A101",
    "etage": 1,
    "type_appartement": "Studio",
    "capacite_personnes": 1,
    "disponibilite": true,
    "etat": "Neuf",
    "superficie": 20.5,
    "loyer_mensuel": 450.00
}

### Get Appartement
@appartementId = 1
GET {{baseUrl}}/appartements/{{appartementId}}
Authorization: Bearer {{token}}
Accept: application/json

### Update Appartement
PUT {{baseUrl}}/appartements/{{appartementId}}
Authorization: Bearer {{token}}
Content-Type: application/json
Accept: application/json

{
    "loyer_mensuel": 460.00,
    "etat": "Bon"
}

### Delete Appartement
DELETE {{baseUrl}}/appartements/{{appartementId}}
Authorization: Bearer {{token}}
Accept: application/json

### --- ETUDIANTS ---

### List Etudiants
GET {{baseUrl}}/etudiants
Authorization: Bearer {{token}}
Accept: application/json

### Create Etudiant
POST {{baseUrl}}/etudiants
Authorization: Bearer {{token}}
Content-Type: application/json
Accept: application/json

{
    "nom": "Dupont",
    "prenoms": "Jean",
    "email": "jean.dupont@example.com",
    "telephone": "+33612345678",
    "sexe": "Masculin",
    "situation_familiale": "Célibataire",
    "date_obtention_baccalaureat": "2023-07-01",
    "matricule": "ETU2023001",
    "handicap": "Aucun"
}

### Get Etudiant
@etudiantId = 1
GET {{baseUrl}}/etudiants/{{etudiantId}}
Authorization: Bearer {{token}}
Accept: application/json

### Update Etudiant
PUT {{baseUrl}}/etudiants/{{etudiantId}}
Authorization: Bearer {{token}}
Content-Type: application/json
Accept: application/json

{
    "telephone": "+33698765432"
}

### Delete Etudiant
DELETE {{baseUrl}}/etudiants/{{etudiantId}}
Authorization: Bearer {{token}}
Accept: application/json

### --- DOSSIERS CANDIDATURE ---

### List Dossiers
GET {{baseUrl}}/dossiers-candidature
Authorization: Bearer {{token}}
Accept: application/json

### Create Dossier
POST {{baseUrl}}/dossiers-candidature
Authorization: Bearer {{token}}
Content-Type: application/json
Accept: application/json

{
    "etudiant_id": 1,
    "annee_universitaire": "2025-2026",
    "statut": "En cours"
}

### Get Dossier
@dossierId = 1
GET {{baseUrl}}/dossiers-candidature/{{dossierId}}
Authorization: Bearer {{token}}
Accept: application/json

### Update Dossier
PUT {{baseUrl}}/dossiers-candidature/{{dossierId}}
Authorization: Bearer {{token}}
Content-Type: application/json
Accept: application/json

{
    "statut": "Validé",
    "score_selection": 15.5,
    "commentaire_admin": "Dossier complet."
}

### Delete Dossier
DELETE {{baseUrl}}/dossiers-candidature/{{dossierId}}
Authorization: Bearer {{token}}
Accept: application/json
